plugins {
    id "me.tatarka.retrolambda" version "3.7.0"
    id "java"
    id "maven-publish"
}

group = 'io.netifi.sdk'
version = '0.2-SNAPSHOT'

repositories {
    jcenter()
    mavenCentral()
    maven { url 'http://repo.spring.io/milestone' }
    maven { url 'https://oss.jfrog.org/libs-snapshot' }
    maven { url 'https://dl.bintray.com/rsocket/RSocket' }
    maven { url 'https://dl.bintray.com/reactivesocket/ReactiveSocket' }
    maven { url 'http://artifactory.netifiinc.com:8081/artifactory/netifi-repo-local/' }
    maven { url 'http://artifactory.netifiinc.com:8081/artifactory/netifi-repo-snapshot/' }
}

dependencies {
    compile 'io.reactivex.rxjava2:rxjava:2.1.3'
    compile 'io.netifi.nrqp.frames:netifi-edge-frames:0.6-SNAPSHOT'
    compile 'net.openhft:zero-allocation-hashing:0.8'
    compile 'io.rsocket:rsocket-transport-netty:0.9-SNAPSHOT'

    compile 'com.fasterxml.jackson.core:jackson-databind:2.9.0'
    compile 'com.fasterxml.jackson.module:jackson-module-afterburner:2.9.0'
    compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:2.9.0'

    testCompile 'junit:junit:4.10'

    testCompile 'org.apache.logging.log4j:log4j-api:2.8.2'
    testCompile 'org.apache.logging.log4j:log4j-core:2.8.2'
    testCompile 'org.apache.logging.log4j:log4j-slf4j-impl:2.8.2'

}

compileJava {
    options.warnings = true
    options.deprecation = true
    options.compilerArgs += ["-Xlint:unchecked"]
}

retrolambda {
    javaVersion JavaVersion.VERSION_1_7
    defaultMethods false
    incremental true
}

task sourceJar(type: Jar) {
    from sourceSets.main.allJava
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java

            artifact sourceJar {
                classifier "sources"
            }
        }
    }

    repositories {
        maven {
            // change to point to your repo, e.g. http://my.org/repo
            /*credentials {
                        username 'jenkins'
                        password project.findProperty("password") ?: ""
                    }*/
            url "http://artifactory.netifiinc.com:8081/artifactory/netifi-repo-snapshot/"
        }
    }
}
